---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.tsx';
import Footer from '../components/Footer.astro';
import ProjectCard from '../components/ProjectCard.astro';
import SidebarOverlay from '../components/SidebarOverlay.tsx';

// Get all projects from the content collection
const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => a.data.order - b.data.order);

// Get about content
const about = await import('../content/about.md');
const aboutContent = about.frontmatter;
---

<script>
  import { animate } from 'motion';
  animate(
    '.wrapper',
    { marginLeft: '4rem' },
    { ease: 'easeIn', duration: 0.5, delay: 0.6 },
  );
  animate(
    '[data-intro-title]',
    { opacity: 1, translate: '0' },
    { ease: 'easeIn', duration: 0.5, delay: 0.1 },
  );
  animate(
    '[data-expertise-block]',
    { opacity: 1, translate: '0' },
    { ease: 'easeIn', duration: 0.5, delay: 0.6 },
  );
  animate(
    '[data-binary-title]',
    { opacity: 1, translate: '0' },
    { ease: 'easeIn', duration: 1, delay: 1.0 },
  );
  animate(
    '[data-about-section]',
    { opacity: 1, translate: '0' },
    { ease: 'easeIn', duration: 1, delay: 1 },
  );
</script>
<Layout title="Paul Huisman | Freelance Web Developer">
  <!-- Sidebar Overlay -->
  <SidebarOverlay />

  <div class="wrapper bg-gray-100 text-black">
    <!-- Header -->
    <Header client:load />

    <!-- Subheader -->
    <section class="container mx-auto px-8 md:px-12 py-10 md:py-16">
      <div class="flex flex-col md:flex-row gap-10">
        <div class="w-full md:w-1/2 mb-8 md:mb-0">
          <h2
            class="text-3xl md:text-8xl font-bold mb-4 opacity-0 translate-y-3 block"
            data-intro-title
          >
            Senior web developer with code &amp; people skills.
          </h2>
        </div>
        <div class="w-full md:w-1/3 md:ml-auto md:mr-[2px] md:max-w-[460px]">
          <div
            class="experience-block bg-yellow-300 border-b-[20px] border-black p-8 opacity-0 translate-x-4"
            data-expertise-block
          >
            <h4 class="text-lg font-bold mb-4">EXPERIENCE</h4>
            <ul class="grid grid-cols-2 gap-2 text-sm">
              <li>Lead development</li>
              <li>PHP</li>
              <li>Laravel</li>
              <li>Symfony</li>
              <li>RESTful API design</li>
              <li>WordPress (ACF)</li>
              <li>Drupal</li>
              <li>Ruby on Rails</li>
              <li>SASS, Tailwind</li>
              <li>ES6, NPM, VueJS</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Binary Section -->
    <section
      class="py-8 bg-gray-100 overflow-hidden text-center opacity-0"
      data-binary-title
    >
      <div
        class="flex flex-wrap justify-center text-xs text-gray-500 font-mono"
      >
        <div class="mx-1">01110011</div>
        <div class="mx-1">01100001</div>
        <div class="mx-1">01110010</div>
        <div class="mx-1">01100001</div>
        <div class="mx-1">01101000</div>
        <div class="mx-1">00100000</div>
        <div class="mx-1">00111100</div>
        <div class="mx-1">00110011</div>
        <div class="mx-1">00100000</div>
        <div class="mx-1">01110000</div>
        <div class="mx-1">01100001</div>
        <div class="mx-1">01110101</div>
        <div class="mx-1">01101100</div>
        <div class="mx-1">00001101</div>
        <div class="mx-1">00001010</div>
      </div>
    </section>

    <!-- About Section -->
    <section
      class="container mx-auto px-8 md:px-12 py-10 md:py-16 opacity-0 translate-y-4"
      data-about-section
    >
      <h2 class="text-3xl font-bold mb-8">About</h2>
      <div class="flex flex-col md:flex-row">
        <div class="w-full md:w-7/12 mb-8 md:mb-0">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div set:html={about.compiledContent()} class="prose" />
          </div>
        </div>
        <div class="w-full md:w-4/12 md:ml-auto">
          <img
            src={aboutContent.image}
            alt="Paul Huisman"
            class="w-full h-auto rounded-lg shadow-lg"
          />
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section class="container mx-auto px-8 md:px-12 py-10 md:py-16">
      <h2 class="text-3xl font-bold mb-8">Projects</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {
          sortedProjects.map((project) => (
            <ProjectCard
              title={project.data.title}
              role={project.data.role}
              description={project.data.description}
              url={project.data.url}
            />
          ))
        }
      </div>
    </section>

    <!-- More Section -->
    <section class="container mx-auto px-8 md:px-12 py-10 md:py-16">
      <h2 class="text-3xl font-bold mb-8">More</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-white shadow-md p-6 rounded-lg">
          <div class="h-1 w-16 bg-green-custom mb-4"></div>
          <h3 class="text-2xl font-bold mb-2">Github</h3>
          <p class="mb-4">
            Have a look at my open-source projects/contributions.
          </p>
          <a
            href="https://github.com/paulhuisman"
            target="_blank"
            rel="noopener noreferrer"
            class="text-green-custom hover:underline"
          >
            View the work
          </a>
        </div>

        <div class="bg-white shadow-md p-6 rounded-lg">
          <div class="h-1 w-16 bg-green-custom mb-4"></div>
          <h3 class="text-2xl font-bold mb-2">Photography</h3>
          <p class="mb-4">
            Everyone needs hobbies. I got quite a few, one of them is
            photography.
          </p>
          <a
            href="https://500px.com/paulhuisman"
            target="_blank"
            rel="noopener noreferrer"
            class="text-green-custom hover:underline"
          >
            View photos
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <Footer />
  </div>
</Layout>
